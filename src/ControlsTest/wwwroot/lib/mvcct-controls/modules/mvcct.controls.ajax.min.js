(function(){(function(){var v=this||(0,eval)("this");(function(g){if("function"===typeof define&&define.amd)define(["../mvcct.controls","../../mvcct-enhancer/mvcct.enhancer.min"],g);else if("object"===typeof exports&&"object"===typeof module)module.exports=g(require("../mvcct.controls"),require("mvcct-enhancer"));else{var n=v.mvcct=v.mvcct||{};g(n.controls,n.enhancer)}})(function(g,n){function w(b,c,a,d,m,e,f,g,k){t[b]={g:a,f:k,h:c,onerror:m,onprogress:g,c:e,i:f,b:d}}function x(b,c){if(b&&c)for(var a=
0;a<c.length;a++){var d=document.createElement("LI");d.appendChild(document.createTextNode(c[a]));b.appendChild(d)}}function J(b,c){if(b&&b.length){var a=r(c);if(a){var d=a.querySelector(y),m;d&&(q(d),d.classList.remove(z),d.classList.add(A),m=document.createElement("UL"),d.appendChild(m));b.map(function(b){if(b.prefix){var c=a.querySelector('[name="'+b.prefix+'"]');c?(c.classList.add(u),(c=B(c,a))?(c.classList.add(C),c.classList.remove(D),c.appendChild(document.createTextNode(b.errors[0]))):x(m,
b.errors)):x(m,b.errors)}else x(m,b.errors)})}}}function I(b){if(b=r(b)){var c=b.querySelector(y);if(c){q(c);c.classList.remove(A);c.classList.add(z);for(var c=b.querySelectorAll("."+u),a=0;a<c.length;a++){var d=c[a];d.classList.remove(u);if(d=B(d,b))d.classList.remove(C),d.classList.add(D),q(d)}}}}function r(b){for(;b&&b.getAttribute;b=b.parentNode)if("FORM"==b.tagName)return b;return null}function E(b,c){if(b&&"object"===typeof b)for(var a in b)b.hasOwnProperty(a)&&c.setRequestHeader(a,b[a])}jQuery=
v.jQuery;var k,q,F,G,H,y,z,A,u,D,C,B,t={};g.addHtmlEndpoint=function(b,c,a,d,m,e){w(b,null,null,d,m,c,a,e)};g.addRouterEndpoint=function(b,c){w(b,null,c,null,null,null,null,null)};g.addJsonEndpoint=function(b,c,a,d,m,e,f,g){w(b,a,null,d,m,e,f,g,c)};g.removeEndpoint=function(b){delete t[b]};g.postJson=function(b,c,a,d,m,e,f,g,k,n){var l=new XMLHttpRequest;l.open("POST",c,!0);l.setRequestHeader("Content-type","application/json");d&&l.setRequestHeader("Authorization","Bearer "+d);E(n,l);l.onload=function(){200!=
l.status?(g?g(b):null,f?f(e?e(l.status):""):null):(m(JSON.parse(l.responseText)),g?g(b):null)};l.onerror=function(){g?g(b):null;f?f(e?e(l.status):""):null};l.onprogress=k;l.send(JSON.stringify(a))};g.getContent=function(b,c,a,d,g,e,f,k,p,n,l){var h=new XMLHttpRequest;h.open(n||"GET",c,!0);a&&h.setRequestHeader("Authorization","Bearer "+a);l&&h.setRequestHeader("Content-type","application/x-www-form-urlencoded");E(p,h);h.onload=function(){h.responseText&&"#"==h.responseText.charAt(0)?(f?f(b):null,
e?e(h.responseText.substring(1)):null):200!=h.status?(f?f(b):null,e?e(g?g(h.status):""):null):(d(h.responseText),f?f(b):null)};h.onerror=function(){f?f(b):null;e?e(g?g(h.status):""):null};h.onprogress=k;l?h.send(l):h.send()};g.postForm=function(b,c,a,d,k,e,f,n,p,q){var l=r(b);if(F(l)){p&&p(b);g.clearErrors(b);var h=new XMLHttpRequest;c=c||l.getAttribute("action");p=[].filter.call(l.elements,function(a){return"radio"!=a.type&&"checkbox"!=a.type||a.checked}).filter(function(a){return!!a.name}).filter(function(a){return!a.disabled}).map(function(a){return encodeURIComponent(a.name)+
"="+encodeURIComponent(a.value)}).join("&");a&&(p?p=p+"&"+a:p=a);h.open("POST",c,!0);h.setRequestHeader("Content-type","application/x-www-form-urlencoded");E(q,h);h.onload=function(){if(h.responseText&&"["==h.responseText.trim().charAt(0)){var a=JSON.parse(h.responseText);0<a.length&&G(a,l);f?f(b):null}else h.responseText&&"#"==h.responseText.charAt(0)?(f?f(b):null,e?e(h.responseText.substring(1)):null):200!=h.status?(f?f(b):null,e?e(k?k(h.status):""):null):(d(h.responseText),f?f(b):null)};h.onerror=
function(){f?f(b):null;e?e(k?k(h.status):""):null};h.onprogress=n;h.send(p)}};n.register(null,null,function(b){k=b.ajax=b.ajax||{};q=k.empty=k.empty||function(b){if(b)if(jQuery){var a=jQuery(b);if(jQuery.validator&&(b=r(b))&&(b=jQuery.data(b,"validator"))&&(b=b.settings)){var d=b.rules;a.find("[data-val=true]").each(function(){delete d[this.name]})}a.empty()}else b.innerHTML=""};F=k.validateForm=k.validateForm||function(b){return jQuery&&jQuery.validator?jQuery(b).closest("form").validate().form():
!0};H=k.clearErrors||I;G=k.dispatchServerErrors||J;H=k.clearErrors||I;y=k.validationSummarySelector||'[data-valmsg-summary="true"], [data-valmsg-ajax="true"]';z=k.validationSummaryValidClass||"validation-summary-valid";A=k.validationSummaryInvalidClass||"validation-summary-errors";u=k.fieldErrorClass||"input-validation-error";D=k.errorLabelValidClass||"field-validation-valid";C=k.errorLabelInvalidClass||"field-validation-error";B=k.errorLabelLocator||function(b,a){return(a=a||r(b))?a.querySelector('[data-val-msg-for="'+
b.name+'"]'):null};g.dispatchServerErrors=G;g.clearErrors=H;g.validateForm=F},"ajax",null);g.addOperation("ajax-html_click",function(b){var c=b.href,a=b.target,d=b.args,g=d[0],e=b.proc||1<d.length?t(d[1]):{},f=new XMLHttpRequest;f.open("GET",c||a.getAttribute("href"),!0);f.onload=function(){f.responseText&&"#"==f.responseText.charAt(0)?(e.a?e.a(a):null,e.onerror?e.onerror(f.responseText.substring(1)):null):200!=f.status?(e.a?e.a(a):null,e.onerror?e.onerror(a.getAttribute("data-error-message")||""):
null):(a=document.getElementById(g),q(a),a.innerHTML=f.responseText,n.transform(a),e.a?e.a(a):null)};f.onerror=function(){e.a?e.a(a):null;e.onerror?e.onerror(a.getAttribute("data-error-message")||""):null};e.c?e.c(a):null;f.send()});g.addOperation("ajax-json_click",function(b){var c=b.target,a=t[b.args[0]];if(a.g)a.g(c.getAttribute("href"));else{var d=new XMLHttpRequest;d.open("GET",c.getAttribute("href"),!0);a.f&&d.setRequestHeader("Authorization","Bearer "+a.f);d.onload=function(){200!=d.status?
(a.a?a.a(c):null,a.onerror?a.onerror(a.b?a.b(d.status):""):null):(a.h(JSON.parse(d.responseText)),a.a?a.a(c):null)};d.onerror=function(){a.a?a.a(c):null;a.onerror?a.onerror(a.b?a.b(d.status):""):null};d.onprogress=a.onprogress;a.c?a.c(c):null;d.send()}});return g})})()})();
