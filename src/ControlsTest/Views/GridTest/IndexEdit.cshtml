@model ControlsTest.Models.ProductlistViewModel
@using ControlsTest.Controllers
@{
    ViewData["Title"] = "Edit immediate";
}
<style>
    tfoot .pagination, thead .pagination {
        margin: 0;
    }
</style>
<h2>@ViewData["Title"].</h2>
<div >
    <grid asp-for="Products.Data"
          type="Immediate"
          all-properties="true"
          mvc-controller="typeof(GridTestController)"
          class="table table-condensed table-bordered">
        <column asp-for="Products.Data.Element().TypeId">
            <external-key-static display-property="Products.Data.Element().TypeName" />
            @*<external-key-static display-property="Products.Data.Element().TypeName"
            items-selector="@getTasks"
            items-value-property="Value"
            items-display-property="Display"
             />*@
            <external-key-remote display-property="Products.Data.Element().TypeName"
                                 items-value-property="Value"
                                 items-display-property="Display"
                                 items-url="@(Url.Action("GetTypes", "DetailTest", new { search = "_zzz_" }))"
                                 dataset-name="product-types"
                                 url-token="_zzz_"
                                 max-results="20" />   
        </column> />
        <column asp-for="Products.Data.Element().Price" colspan="2" />
        <row-type asp-for="Products.Data.SubInfo<ProductMaintenanceViewModel>().Model"
                  mvc-controller="typeof(GridTestController)"
                  from-row="0">
            <column asp-for="Products.Data.Element().Price" colspan="1" />
            <column asp-for="Products.Data.SubElement<ProductMaintenanceViewModel>().MaintenanceYearlyRate" />
        </row-type>
        <toolbar zone-name="@LayoutStandardPlaces.Header">
            <copy-html name="main-pager">
                <pager mode="CustomPages"
                       class="pagination pagination-sm"
                       max-pages="4"
                       current-page="Products.Page"
                       page-size-default="3"
                       total-pages="Products.TotalPages"
                       skip-url-token="_zzz_"
                       url-default="@Url.Action("IndexEdit", "GridTest", new {page="_zzz_" })" />
            </copy-html>
        </toolbar>
        <toolbar zone-name="@LayoutStandardPlaces.Footer">
            <paste-html name="main-pager" />
        </toolbar>
    </grid>
</div>

@section Scripts {
    @*<link href="~/lib/mvcct-controls-server/modules-bootstrap/typeaheadjs3.css" rel="stylesheet" />
            @{ await Html.RenderPartialAsync("_ValidationScriptsPartial"); }
            <script src="~/lib/corejs-typeahead/dist/typeahead.bundle.js"></script>
        <script src="~/lib/mvcct-controls-server/mvcct.controls.server.js"></script>
        <script src="~/lib/mvcct-controls-server/modules-bootstrap/mvcct.controls.server.autocomplete.js"></script>*@

    <link href="~/lib/awesomplete/awesomplete.css" rel="stylesheet" />
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial"); }
    <script src="~/lib/awesomplete/awesomplete.min.js"></script>
    <script src="~/lib/mvcct-controls/mvcct.controls.js"></script>
    <script src="~/lib/mvcct-controls/modules/mvcct.controls.autocomplete.js"></script>
    <script src="~/lib/mvcct-controls/modules/mvcct.controls.ajax.js"></script>
    <script src="~/lib/mvcct-controls/modules/mvcct.controls.serverGrid.js"></script>
}
